class Solution:
    def maxProfit(self, prices: List[int]) -> int:
        @cache
        def dfs(i, j, hold):
            if j<0: return -inf
            if i<0: return -inf if hold else 0
            if hold: return max(dfs(i-1, j, True), dfs(i-1, j-1, False)-prices[i])
            return max(dfs(i-1, j, True)+prices[i], dfs(i-1, j, False))
        return dfs(len(prices)-1, 2, False)
